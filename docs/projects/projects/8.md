+ [🔥 开源地址](https://github.com/cubxxw/iam)

# 第8节 IAM 项目如何进行研发流程管理

<br>
<div><a href = '7.md' style='float:left'>⬆️上一节🔗  </a><a href = '9.md' style='float: right'>  ⬇️下一节🔗</a></div>
<br>

> ❤️💕💕During the winter vacation, I followed up and learned two projects: tiktok project and IAM project, and summarized and practiced the CloudNative project and Go language. I learned a lot in the process.Myblog:[http://nsddd.top](http://nsddd.top/)

---
[[TOC]]
[TOC]

## 开始

**开发阶段主要要做的两件事情分别是代码开发和代码提交两个部分。**

拿到需求之后，首先需要开发代码。这时，我们就需要选择一个适合团队和项目的 Git 工作流。因为 Git Flow 工作流比较适合大型的非开源项目，所以这里我们选择 Git Flow 工作流。代码开发的具体步骤如下：

**第一步：基于 develop 新建一个分支 `feature/helloworld`**

```bash
$ git checkout -b feature/helloworld develop
```

⚠️ **这里需要注意**：新建的 branch 名要符合 Git Flow 工作流中的分支命名规则。否则，在 git commit 阶段，会因为 `branch` 不规范导致 `commit` 失败。IAM 项目的分支命令规则具体如下图所示：

![image-20230220095937613](http://sm.nsddd.top/sm202302200959749.png)

> IAM 项目通过 `pre-commit githooks` 来确保分支名是符合规范的。在 IAM 项目根目录下执行 `git commit` 命令，git 会自动执行`pre-commit`脚本，该脚本会检查当前 branch 的名字是否符合规范。

这里还有一个地方需要你注意：git 不会提交 `.git/hooks` 目录下的 `githooks` 脚本，所以我们需要通过以下手段，确保开发者 clone 仓库之后，仍然能安装我们指定的 githooks 脚本到 `.git/hooks` 目录：

```bash
# Copy githook scripts when execute makefile    
COPY_GITHOOK:=$(shell cp -f githooks/* .git/hooks/) 
```

上述代码放在`scripts/make-rules/common.mk`文件中，每次执行 make 命令时都会执行，可以确保 `githooks` 都安装到 `.git/hooks`目录下。



**第二步，在 `feature/helloworld` 分支中，完成 `helloworld` 命令的添加。**

首先，通过 iamctl new helloworld 命令创建 helloworld 命令模板：

```bash
$ iamctl new helloworld -d internal/iamctl/cmd/helloworld
Command file generated: internal/iamctl/cmd/helloworld/helloworld.go
```



接着，编辑`internal/iamctl/cmd/cmd.go`文件，在源码文件中添加`helloworld.NewCmdHelloworld(f, ioStreams`),，加载 helloworld 命令。这里将 helloworld 命令设置为Troubleshooting and Debugging Commands命令分组：





## END 链接
<ul><li><div><a href = '7.md' style='float:left'>⬆️上一节🔗  </a><a href = '9.md' style='float: right'>  ️下一节🔗</a></div></li></ul>

+ [Ⓜ️回到目录🏠](../README.md)

+ [**🫵参与贡献💞❤️‍🔥💖**](https://nsddd.top/archives/contributors))

+ ✴️版权声明 &copy; ：本书所有内容遵循[CC-BY-SA 3.0协议（署名-相同方式共享）&copy;](http://zh.wikipedia.org/wiki/Wikipedia:CC-by-sa-3.0协议文本) 

